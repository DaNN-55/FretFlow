<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>和弦与琶音训练</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Righteous&display=swap"
    />
    <link rel="stylesheet" href="../styles/guitartraining.css" />
    <link rel="stylesheet" href="../styles/chord-arpeggio.css" />
  </head>
  <body class="chord-arpeggio mode-training">
    <div class="page">
      <header class="page-hero">
        <div class="hero-copy">
          <p class="eyebrow">FretFlow</p>
          <h1>FretFlow · 音阶与指板训练</h1>
          <p class="hero-subtitle">
            以 <b>音阶</b> 为核心，快速切换调式与和弦。
          </p>
          <p class="hero-subtitle">以 CAGED 指型为核心，聚焦根音和琶音路径。</p>
        </div>
        <div class="hero-card">
          <div class="hero-card-title">训练提示</div>
          <div class="hero-card-body">
            <div class="tip-row">
              <span class="tip-label">节奏</span>
              <span>从 60 BPM 起步，逐步递增。</span>
            </div>
            <div class="tip-row">
              <span class="tip-label">听感</span>
              <span>切换上行/下行，感受张力变化。</span>
            </div>
            <div class="tip-row">
              <span class="tip-label">定位</span>
              <span>打开根音高亮确认落点。</span>
            </div>
          </div>
        </div>
      </header>

      <section class="control-panel">
        <div class="mode-toggle" role="tablist" aria-label="训练模式切换">
          <button
            type="button"
            class="mode-btn active"
            data-mode="training"
            role="tab"
            aria-selected="true"
          >
            训练模式
          </button>
          <button
            type="button"
            class="mode-btn"
            data-mode="caged"
            role="tab"
            aria-selected="false"
          >
            CAGED 模式
          </button>
        </div>
        <div class="control-panel-grid">
          <div class="control-group training-only scale-group">
            <div class="group-title">音阶</div>
            <div class="control-row compact-controls">
              <label class="field field-inline">
                <span class="field-label">根音</span>
                <select id="rootSelect" aria-label="选择根音">
                  <option value="C">C</option>
                  <option value="C#">C#</option>
                  <option value="D">D</option>
                  <option value="D#">D#</option>
                  <option value="E">E</option>
                  <option value="F">F</option>
                  <option value="F#">F#</option>
                  <option value="G">G</option>
                  <option value="G#">G#</option>
                  <option value="A">A</option>
                  <option value="A#">A#</option>
                  <option value="B">B</option>
                </select>
              </label>
              <label class="field field-inline">
                <span class="field-label">调式</span>
                <select id="scaleSelect" aria-label="选择音阶调式">
                  <option value="major">自然大调</option>
                  <option value="minor">自然小调</option>
                  <option value="pentatonicMajor">大五声音阶</option>
                  <option value="pentatonicMinor">小五声音阶</option>
                </select>
              </label>
              <div class="switch-box">
                <span class="switch-label">音阶显示</span>
                <label class="switch">
                  <input
                    type="checkbox"
                    id="scaleToggle"
                    aria-label="显示音阶"
                  />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>

          <div class="control-group metronome-group">
            <div class="group-title">节拍器</div>
            <div class="control-row">
              <div class="metronome-toggle">
                <label for="metronomeToggle">开启</label>
                <label class="switch">
                  <input
                    type="checkbox"
                    id="metronomeToggle"
                    aria-label="开启节拍器"
                  />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="metronome-speed">
                <label for="metronomeSpeed">速度 (BPM)</label>
                <input
                  type="range"
                  id="metronomeSpeed"
                  min="40"
                  max="200"
                  value="120"
                />
                <div class="metronome-speed-value">
                  <span id="speedValue">120</span> BPM
                </div>
              </div>
            </div>
          </div>

          <div class="control-group caged-only">
            <div class="group-title">CAGED指型</div>
            <div class="control-row">
              <div class="btn-group">
                <button type="button" data-pattern="1" aria-pressed="false">
                  C指型
                </button>
                <button type="button" data-pattern="2" aria-pressed="false">
                  A指型
                </button>
                <button type="button" data-pattern="3" aria-pressed="false">
                  G指型
                </button>
                <button type="button" data-pattern="4" aria-pressed="false">
                  E指型
                </button>
                <button type="button" data-pattern="5" aria-pressed="false">
                  D指型
                </button>
              </div>
              <div class="switch-box">
                <span class="switch-label">CAGED System</span>
                <label class="switch">
                  <input
                    type="checkbox"
                    id="cagedToggle"
                    aria-label="切换 CAGED 和弦音显示"
                  />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section
        class="fretboard-section training-only"
        id="trainingFretboardSection"
      >
        <div class="fretboard-shell" id="fretboardShell">
          <div class="fretboard-wrapper">
            <div id="fretboard" class="fretboard"></div>
            <div id="fretNumbers" class="fret-numbers"></div>
          </div>
        </div>
      </section>

      <section class="fretboard-section caged-only" id="cagedFretboardSection">
        <div id="cagedFretboardMount"></div>
      </section>
    </div>

    <script src="../chord-arpeggio.js"></script>
  </body>
</html>
